# AI 피드백 기능 설정 가이드

## 1. OpenAI API 키 설정

### 1.1 OpenAI API 키 발급
1. [OpenAI 웹사이트](https://platform.openai.com/)에 접속
2. 계정 생성 또는 로그인
3. API Keys 메뉴에서 새 API 키 생성
4. 생성된 API 키를 복사

### 1.2 API 키 적용
`src/lib/openai.ts` 파일의 5번째 줄을 수정하세요:

```typescript
const OPENAI_API_KEY = 'your-openai-api-key-here'; // 여기에 실제 API 키 입력
```

예시:
```typescript
const OPENAI_API_KEY = 'sk-1234567890abcdef...';
```

## 2. AI 피드백 기능 사용법

### 2.1 피드백 추천
- **사용법**: "피드백 추천" 버튼 클릭 또는 "피드백 추천" 메시지 전송
- **필요 조건**: 점수, 기여방식, 기여범위가 모두 설정되어야 함
- **기능**: 과업 정보를 바탕으로 적절한 피드백 자동 생성

### 2.2 피드백 개선
- **사용법**: "피드백 개선" 버튼 클릭 또는 "피드백 개선" 메시지 전송
- **필요 조건**: 기존 피드백이 작성되어 있어야 함
- **기능**: 작성된 피드백을 더 구체적이고 효과적으로 개선

### 2.3 자동 중복 검사
- **사용법**: 평가 저장 시 자동으로 실행
- **기능**: 모든 과업의 피드백을 비교하여 유사성 검사
- **경고**: 유사한 피드백이 발견되면 저장 전 사용자에게 경고

### 2.4 자유 질문
- **사용법**: 채팅창에 직접 질문 입력
- **예시**: "좋은 피드백의 특징은?", "점수 3점인 경우 어떻게 피드백을 작성해야 할까?"

## 3. 보안 주의사항

### 3.1 API 키 보안
- **프로덕션 환경**: API 키를 환경변수로 관리
- **개발 환경**: 코드에 직접 입력 가능하지만 Git에 커밋하지 않도록 주의
- **권장사항**: `.env` 파일 사용

### 3.2 환경변수 설정 (권장)
1. 프로젝트 루트에 `.env` 파일 생성:
```
VITE_OPENAI_API_KEY=your-api-key-here
```

2. `src/lib/openai.ts` 수정:
```typescript
const OPENAI_API_KEY = import.meta.env.VITE_OPENAI_API_KEY || 'your-fallback-key';
```

3. `.gitignore`에 `.env` 추가:
```
.env
.env.local
```

## 4. 기능 테스트

### 4.1 테스트 시나리오
1. **평가자로 로그인**
2. **평가 화면에서 과업 선택**
3. **점수, 기여방식, 기여범위 설정**
4. **"AI와 대화로 피드백 만들기" 버튼 클릭**
5. **다양한 기능 테스트**

### 4.2 예상 결과
- 피드백 추천: 과업 정보에 맞는 구체적인 피드백 생성
- 피드백 개선: 기존 피드백을 더 전문적이고 구체적으로 개선
- 자동 중복 검사: 평가 저장 시 모든 피드백의 유사성 자동 검사
- 자유 질문: 피드백 작성에 대한 도움 제공

## 5. 문제 해결

### 5.1 API 호출 실패
- **원인**: API 키가 잘못되었거나 네트워크 문제
- **해결**: API 키 확인, 네트워크 연결 확인

### 5.2 응답이 느림
- **원인**: OpenAI API 응답 지연
- **해결**: 잠시 기다리거나 다시 시도

### 5.3 기능이 작동하지 않음
- **원인**: 필요한 조건이 충족되지 않음
- **해결**: 점수, 기여방식, 기여범위 설정 확인

## 6. 추가 개발

### 6.1 백엔드 프록시 구현 (권장)
실제 서비스에서는 보안을 위해 백엔드 프록시를 구현하는 것을 권장합니다:

```typescript
// 프론트엔드에서 백엔드 API 호출
const response = await fetch('/api/ai/feedback', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ prompt, context })
});
```

### 6.2 추가 기능 아이디어
- 피드백 템플릿 제공
- 감정 분석 기반 피드백 조정
- 다국어 지원
- 피드백 히스토리 분석

## 7. 비용 고려사항

### 7.1 OpenAI API 비용
- GPT-3.5-turbo: 약 $0.002 per 1K tokens
- 예상 월 비용: 사용량에 따라 $5-50 정도
- **권장**: 사용량 모니터링 및 비용 제한 설정

### 7.2 비용 최적화
- 토큰 사용량 최소화
- 캐싱 구현
- 사용자당 일일 제한 설정 